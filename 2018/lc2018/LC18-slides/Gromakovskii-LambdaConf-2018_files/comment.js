define(["require","exports","tslib","react","classnames","spectrum/overflow_button","spectrum/popover","spectrum_comments/comment_avatar","spectrum_comments/comment_editor/comment_editor","spectrum_comments/comment_editor/components/post_bar","spectrum_comments/comment_editor/comment_renderer","prop-types"],function(e,t,n,o,a,r,c,s,i,m,l,p){"use strict";function d(e,t){var a=t.localization;return o.createElement(m.PostBar,n.__assign({},e,{postLabel:a.editPostLabel,cancelLabel:a.editCancelLabel,disableCancelButton:!1}))}Object.defineProperty(t,"__esModule",{value:!0}),d.contextTypes={localization:p.object};var u=(function(e){function t(){var t=null!==e&&e.apply(this,arguments)||this;return t.onEdit=function(){t.props.onStartEdit(t.props.comment)},t.onSave=function(e){t.props.actions.onEdited(e),t.props.onEndEdit()},t.onMentionsQueryUpdated=t.props.actions.onMentionsQueryUpdated,t}return n.__extends(t,e),t.prototype.classNameUtil=function(){for(var e=[],t=0;t<arguments.length;t++)e[t]=arguments[t];var n=this.props,o=n.active,r=void 0!==o&&o,c=n.className,s=n.comment.deleted;return a.apply(void 0,[c].concat(e,[{"sc-comment-active":r,"sc-comment-deleted":s}]))},Object.defineProperty(t.prototype,"localization",{get:function(){return this.context.localization},enumerable:!0,configurable:!0}),t.prototype.renderActionsMenu=function(){var e=this.props,t=e.comment.userPermissions,n=t.canEdit,a=t.canDelete,s=e.actions.onDeleted,i=e.isMobile;if(!n&&!a||i)return null;var m=this.localization;return o.createElement(c.Popover,{className:"sc-comment-actions"},o.createElement(c.PopoverTrigger,{className:"sc-comment-actions-button"},o.createElement(r.OverflowButton,{size:"small",variant:"borderless","aria-label":"Actions"})),o.createElement(c.PopoverContent,{attachment:"right"},n&&o.createElement(c.PopoverContentItem,{onClick:this.onEdit},m.commentEditLabel),a&&o.createElement(c.PopoverContentItem,{className:"sc-comment-actions-delete",onClick:s},m.commentDeleteLabel)))},t.prototype.renderDeletedMode=function(){return o.createElement("li",{className:this.classNameUtil()},o.createElement("div",{className:"sc-comment-avatar"},o.createElement(s.DeletedCommentAvatar,null)),o.createElement("div",{className:"sc-comment-content-container"},o.createElement("div",{className:"sc-comment-content"},this.props.children,o.createElement("span",{className:"sc-comment-text"},this.localization.commentDeletedMsg))))},t.prototype.renderDisplayMode=function(){var e=this.localization,t=this.props,n=t.active,a=void 0!==n&&n,r=t.comment,c=t.commentAvatarComponent,s=r.content,i=r.author;return o.createElement("li",{className:this.classNameUtil("sc-comment-renderer")},o.createElement(l.CommentRenderer,{content:s,author:i,commentAvatarComponent:c,annotation:this.props.children},a?o.createElement("div",{className:"sc-comment-info"},o.createElement("span",{className:"sc-comment-author"},r.author.name.display),o.createElement("span",{className:"sc-comment-timestamp"},e.ago(r.timestamp)),this.renderActionsMenu()):null))},t.prototype.renderEditMode=function(){var e=this.props,t=e.comment,n=e.mentionsMatches,a=e.onEndEdit;return o.createElement("li",{className:this.classNameUtil("sc-comment-editor","sc-comment-inline-editor")},o.createElement(i.CommentEditor,{author:t.author,content:t.content,postSignalComponent:d,onCancel:a,onPost:this.onSave,mentionsMatches:n,onMentionsQueryUpdated:this.onMentionsQueryUpdated,renderBare:!0}))},t.prototype.render=function(){return this.props.comment.deleted?this.renderDeletedMode():this.props.isEditing?this.renderEditMode():this.renderDisplayMode()},t.contextTypes={localization:p.object},t.defaultProps={isEditing:!1},t})(o.PureComponent);t.Comment=u});
//# sourceMappingURL=comment.min.js-vflcg5-yQ.map