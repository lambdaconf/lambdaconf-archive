define("modules/clean/api_v2/client",["require","exports","tslib","jquery","modules/clean/api_v2/client_base","modules/clean/api_v2/error","modules/clean/devtools/panels/performance/perf_hub_actions","modules/constants/debug","modules/constants/request","modules/core/browser","modules/core/cookies","modules/core/uri"],function(e,r,t,n,o,s,i,u,c,a,p,l){"use strict";Object.defineProperty(r,"__esModule",{value:!0}),n=t.__importDefault(n),u=t.__importStar(u),a=t.__importStar(a);var d=(function(e){function r(r,t){var n=e.call(this)||this;if(void 0===r&&(r="async"),"async"===r){if(void 0!==t)throw new Error("syncMode is 'async'; do not specify a syncTimeout")}else{if("syncOrServiceWorker"===r)throw new Error("syncOrServiceWorker mode not yet supported");if(void 0===t)throw new Error("syncMode is "+r+", but syncTimeout was not specified");if(t<=0)throw new Error("syncMode is "+r+", and you passed syncTimeout="+t+". syncTimeout must be a positive number")}return n.syncMode=r,n.syncTimeout=t,n}return t.__extends(r,e),r.prototype.upload=function(e,n,o,s,i){var u=r.getHeaders(e,t.__assign({"Dropbox-API-Arg":JSON.stringify(o)},i)),c=r.getRpcUriStringAndPath(n);return this.executeRpc(c.uriString,c.path,u,s,"application/octet-stream")},r.prototype._rpc=function(e,t,n){null==t&&(t=null);var o=r.getHeaders(n.subjectUserId,n.headers),s=r.getRpcUriStringAndPath(e),i=JSON.stringify(t);return this.executeRpc(s.uriString,s.path,o,i)},r.getHeaders=function(e,r){var n=p.Cookies.read("__Host-js_csrf")||"";return t.__assign({"X-Dropbox-Uid":null!=e?e:c.LOGGED_OUT_X_DROPBOX_UID,"X-CSRF-Token":n},r)},r.getRpcUriStringAndPath=function(e){var r="client-web.dropbox.com"===a.get_hostname()?"client-web.dropbox.com":"www.dropbox.com",t=new l.URI({scheme:"https",authority:r,path:"/2/"+e});return u.CPROFILE_ENABLED&&t.setQuery({cProfile:u.CPROFILE_PARAMETER,parent_request_id:c.REQUEST_ID}),{uriString:t.toString(),path:t.getPath()}},r.prototype.executeRpc=function(e,r,t,n,o){switch(void 0===n&&(n=""),void 0===o&&(o="application/json"),this.syncMode){case"async":return this.executeAsyncRpc(e,r,t,n,o);case"sync":return this.executeSyncRpc(e,r,t,n,o);case"syncOrServiceWorker":throw new Error("syncOrServiceWorker mode not yet supported")}},r.prototype.executeAsyncRpc=function(e,t,o,s,i){return new Promise(function(u,c){return n.default.ajax({type:"POST",url:e,contentType:i,headers:o,data:s}).done(function(e,n,o){return u(r.processXHRSuccess(t,e,n,o))}).fail(function(e){return c(r.processXHRError(e))})})},r.prototype.executeSyncRpc=function(e,t,o,s,i){var u=Promise.resolve(null),c=function(e,n,o){u=Promise.resolve(r.processXHRSuccess(t,e,n,o))},a=function(e){u=Promise.reject(r.processXHRError(e))};return n.default.ajax({type:"POST",url:e,contentType:i,headers:o,data:s,async:!1,timeout:this.syncTimeout,success:c,error:a}),u},r.processXHRSuccess=function(e,r,t,n){return u.CPROFILE_ENABLED&&i.PerfHubActions.add_ajax_profile(n,e),null!=n.responseText?JSON.parse(n.responseText):null},r.processXHRError=function(e){return s.ApiError.parseResponse(e.status,e.getAllResponseHeaders(),e.responseText)},r})(o.ApiV2ClientBase);r.ApiV2Client=d}),define("modules/clean/api_v2/client_base",["require","exports"],function(e,r){"use strict";Object.defineProperty(r,"__esModule",{value:!0});var t=(function(){function e(e,r){this.ns=e,this.client=r}return e.prototype.rpc=function(e,r,t){return this.client._rpc(this.ns+"/"+e,r,t)},e})(),n=(function(){function e(){}return e})();r.ApiV2ClientBase=n,n.prototype.ns=function(e){return new t(e,this)}}),define("modules/clean/api_v2/error",["require","exports","tslib","modules/core/html","modules/core/i18n","external/lodash"],function(e,r,t,n,o,s){"use strict";function i(e){return function(r){if(r instanceof u)return e(r);throw r}}Object.defineProperty(r,"__esModule",{value:!0}),s=t.__importStar(s);var u=(function(){function e(e){this.message=e}return e.parseResponse=function(r,t,i,u){void 0===u&&(u=null);var c="";null==u&&(u=r in f?f[r]:r>=500?l:e);var a={};if(t){var p=t.split("\n").map(function(e){return e.split(": ")});a=s.zipObject(s.map(p,s.first),s.map(p,function(e){return null!=e&&e[1]}))}var d={raw:{status:r,headerString:t,responseBody:i},summary:null,error:{},headers:a};try{var _=JSON.parse(i)||{};d.error=_.error,d.summary=_.error_summary,c=null!=_.user_message?_.user_message.text:""}catch(e){}429!==r||c||(c=o._('Folder updates in progress â€” please try again later.\n<a href="/help/9259" target="_blank" rel="noopener">Learn more</a>'));var y=void 0;return c&&(y=new n.HTML(c)),s.assignIn(new u(y),d)},e})();r.ApiError=u;var c=(function(e){function r(){return null!==e&&e.apply(this,arguments)||this}return t.__extends(r,e),r})(u);r.BadRequestError=c;var a=(function(e){function r(){return null!==e&&e.apply(this,arguments)||this}return t.__extends(r,e),r})(u);r.AuthError=a;var p=(function(e){function r(){return null!==e&&e.apply(this,arguments)||this}return t.__extends(r,e),r})(u);r.AppError=p;var l=(function(e){function r(){return null!==e&&e.apply(this,arguments)||this}return t.__extends(r,e),r})(u);r.ServerError=l;var d=(function(e){function r(){return null!==e&&e.apply(this,arguments)||this}return t.__extends(r,e),r})(u);r.RateLimitError=d,r.catchApiError=i;var f={400:c,401:a,409:p,429:d}});
//# sourceMappingURL=pkg-api_v2.min.js-vfl7qunUc.map