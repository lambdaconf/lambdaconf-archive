define(["require","exports","tslib","react","prop-types","spectrum_comments/thread","spectrum_comments/utils/scroll_list","spectrum_comments/utils/calc_unread_pill_data","spectrum_comments/comment_stream/unread_pill","spectrum_comments/utils/throttle"],function(e,t,r,n,a,l,o,i,d,s){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var c=(function(e){function t(t){var r=e.call(this,t)||this;return r.threadIdToRef={},r.unreadPillHasUpdatedForThisRender=!1,r.renewUnreadPillData=function(){if(r.props.showUnreadPill){var e=r.scrollListRef.listRef;if(e){var t=e.getBoundingClientRect();r.unreadPillHasUpdatedForThisRender=!0,r.setState({unreadPillData:i.calcUnreadPillData({containerTop:t.top,containerBottom:t.bottom,threadIdToRef:r.threadIdToRef,threads:r.props.threads})})}}},r.createUnreadPills=function(){var e=r.state.unreadPillData,t=e.unreadsAbove,a=e.nearestUnreadThreadAbove,l=e.unreadsBelow,o=e.nearestUnreadThreadBelow,i=null,s=null;return t&&a&&(i=n.createElement(d.UnreadPill,{countMsg:r.context.localization.unreadComments(t),onClick:r.props.onThreadActivated(a),direction:"UP"})),l&&o&&(s=n.createElement(d.UnreadPill,{countMsg:r.context.localization.unreadComments(l),onClick:r.props.onThreadActivated(o),direction:"DOWN"})),{unreadPillAbove:i,unreadPillBelow:s}},r.state={unreadPillData:{unreadsAbove:0,nearestUnreadThreadAbove:null,unreadsBelow:0,nearestUnreadThreadBelow:null}},r.throttledRenewUnreadPillData=s.throttle(r.renewUnreadPillData,250),r}return r.__extends(t,e),t.prototype.componentDidMount=function(){this.renewUnreadPillData()},t.prototype.componentDidUpdate=function(){if(this.unreadPillHasUpdatedForThisRender)return void(this.unreadPillHasUpdatedForThisRender=!1);this.throttledRenewUnreadPillData()},t.prototype.render=function(){var e=this,t=this.props,a=t.clickHandler,i=t.editor,d=t.threads,s=t.threadIdToThreadProps,c=t.wrapperClassnames,u=d.map(function(t){return n.createElement(l.Thread,r.__assign({},s[t.id],{ref:function(r){e.threadIdToRef[t.id]=r},key:t.id}))}),p=this.createUnreadPills(),h=p.unreadPillAbove,m=p.unreadPillBelow;return n.createElement("div",{className:c},i,h,n.createElement(o.ScrollList,{className:"sc-comment-stream-threads",onClick:a,onScroll:this.throttledRenewUnreadPillData,onWindowResize:this.throttledRenewUnreadPillData,ref:function(t){e.scrollListRef=t}},u),m)},t.contextTypes={localization:a.object},t})(n.PureComponent);t.UnreadPillWrapper=c});
//# sourceMappingURL=unread_pill_wrapper.min.js-vfl6VVgsz.map